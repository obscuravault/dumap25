<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Obscura Vault - Courses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <style>
    /* Base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #fff;
      line-height: 1.6;
      min-height: 100vh;
      padding-bottom: 40px;
    }
    
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header */
    .header {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: #fff;
      font-weight: 700;
      font-size: 1.5rem;
    }
    
    .nav-links {
      display: flex;
      gap: 25px;
      align-items: center;
    }
    
    .nav-links a {
      color: #e0e0e0;
      text-decoration: none;
      font-size: 1rem;
      transition: color 0.3s;
    }
    
    .nav-links a:hover {
      color: #fff;
    }
    
    .icon-btn {
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 1.2rem;
    }
    
    .hamburger {
      display: none;
      flex-direction: column;
      gap: 4px;
    }
    
    .hamburger span {
      width: 25px;
      height: 3px;
      background: #fff;
      border-radius: 2px;
    }
    
    /* Player section */
    .player-wrap {
      max-width: 1100px;
      margin: 40px auto 0;
      padding: 0 15px;
    }
    
    .back-row {
      margin-bottom: 20px;
    }
    
    .back-row button {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: #fff;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }
    
    .back-row button:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    h2 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
    }
    
    h3 {
      font-size: 1.5rem;
      margin: 30px 0 20px;
      text-align: center;
    }
    
    /* Player shell */
    .player-shell {
      position: relative;
      width: 100%;
      background: #000;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
      aspect-ratio: 16/9;
      user-select: none;
      -webkit-user-select: none;
    }
    
    /* Mobile adjustments for player shell */
    @media (max-width: 768px) {
      .player-shell {
        border-radius: 8px;
        aspect-ratio: 16/9;
      }
    }
    
    /* Watermark Image */
    .ov-watermark1 {
      position: absolute;
      bottom: 10px;
      right: 10px;
      pointer-events: none;
      opacity: 0.18;
      mix-blend-mode: difference;
      width: 100px;
      height: 100px;
      overflow: hidden;
      z-index: 3;
    }
    
    .ov-watermark1 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: invert(1);
      opacity: 0.6;
    }
    
    /* Watermark */
    .ov-watermark {
      position: absolute;
      inset: 0;
      pointer-events: none;
      display: grid;
      place-items: center;
      opacity: .18;
      mix-blend-mode: darken;
      font-weight: 700;
      color: #00f;
      text-transform: uppercase;
      letter-spacing: 4px;
      font-size: clamp(16px, 5vw, 42px);
      background-image: repeating-linear-gradient(-30deg, rgba(0, 0, 255, .12) 0 40px, rgba(0, 0, 255, .15) 40px 80px);
      z-index: 3;
    }
    
    .ov-watermark span {
      text-shadow: 0 1px 0 rgba(0, 0, 0, .8);
    }
    
    /* The actual YouTube host container */
    .yt-host, .yt-iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
    
    .yt-iframe {
      border: 0;
    }
    
    /* Transparent layer that blocks direct interaction with iframe */
    .anti-iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 4;
      background: transparent;
    }
    
    /* Controls bar */
    .controls {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 5;
      display: grid;
      gap: 8px;
      padding: 10px 12px;
      background: linear-gradient(to top, rgba(0, 0, 0, .75), rgba(0, 0, 0, .0));
      transition: opacity 0.3s ease;
    }
    
    /* Hide controls when not interacting on mobile */
    @media (max-width: 768px) {
      .player-shell:not(:hover) .controls {
        opacity: 0;
        pointer-events: none;
      }
      
      .player-shell:hover .controls {
        opacity: 1;
      }
    }
    
    .row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .btn1, .icon {
      appearance: none;
      border: 0;
      outline: 0;
      background: rgba(0, 0, 0, 1);
      color: #fff;
      padding: 8px 12px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(6px);
    }
    
    .btn1:hover, .icon:hover {
      background: rgba(255, 255, 255, .18);
      color: #000;
      padding: 8px 12px;
      border-radius: 12px;
    }
    
    .btn1:active, .icon:active {
      transform: translateY(1px);
    }
    
    .btn, .icon {
      appearance: none;
      border: 0;
      outline: 0;
      background: rgba(255, 255, 255, .12);
      color: #fff;
      padding: 8px 12px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(6px);
    }
    
    .btn:hover, .icon:hover {
      background: rgba(255, 255, 255, .18);
    }
    
    .btn:active, .icon:active {
      transform: translateY(1px);
    }
    
    /* Time + seek */
    .time {
      color: #fff;
      font-variant-numeric: tabular-nums;
      font-size: 13px;
      opacity: .9;
      min-width: 110px;
      text-align: center;
    }
    
    .seek {
      flex: 1 1 auto;
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 120px;
    }
    
    .seek input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, .3);
      outline: none;
    }
    
    .seek input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #fff;
      cursor: pointer;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, .2);
    }
    
    .seek input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #fff;
      cursor: pointer;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, .2);
    }
    
    /* Mobile adjustments for controls */
    @media (max-width: 768px) {
      .controls {
        padding: 8px 10px;
      }
      
      .btn, .btn1, .icon {
        padding: 6px 10px;
        font-size: 12px;
      }
      
      .time {
        font-size: 11px;
        min-width: 90px;
      }
      
      .seek input[type="range"] {
        height: 5px;
      }
      
      .seek input[type="range"]::-webkit-slider-thumb {
        width: 12px;
        height: 12px;
      }
      
      .speed {
        padding: 6px 8px;
        font-size: 12px;
      }
      
      /* Hide text labels on mobile to save space */
      .icon span {
        display: none;
      }
      
      .right {
        gap: 6px;
      }
    }
    
    /* Right-side controls */
    .right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .speed {
      background: rgba(255, 255, 255, .12);
      color: #fff;
      border-radius: 12px;
      padding: 8px 10px;
      border: 0;
    }
    
    /* Mobile tap area improvements */
    @media (max-width: 768px) {
      .icon, .btn, .btn1 {
        min-height: 36px;
        min-width: 36px;
        justify-content: center;
      }
    }
    
    /* Prevent image/element dragging */
    img, .player-shell, .anti-iframe {
      -webkit-user-drag: none;
    }
    
    /* Player CTA buttons */
    .player-cta {
      margin-top: 20px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .player-cta a {
      text-decoration: none;
    }
    
    @media (max-width: 768px) {
      .player-cta {
        flex-direction: column;
      }
      
      .player-cta .btn1 {
        width: 100%;
        text-align: center;
        justify-content: center;
      }
    }
    
    /* Divider */
    .bar {
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.3), transparent);
      margin: 30px 0;
    }
    
    /* Related cards */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    @media (max-width: 768px) {
      .cards {
        grid-template-columns: 1fr;
        gap: 15px;
      }
    }
    
    .card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }
    
    .card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }
    
    .card-body {
      padding: 15px;
    }
    
    .tag-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 0.8rem;
      color: #aaa;
    }
    
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--subject-color, #666);
    }
    
    .card h4 {
      font-size: 1.1rem;
      margin-bottom: 8px;
    }
    
    .card p {
      font-size: 0.9rem;
      color: #ccc;
      margin-bottom: 15px;
    }
    
    .card-actions {
      display: flex;
      justify-content: flex-end;
    }
    
    /* Footer */
    .footer {
      margin-top: 60px;
      position: relative;
    }
    
    .footer-top-art {
      height: 5px;
      background: linear-gradient(90deg, #ff0080, #ff8c00, #ffed00, #00ff80, #00c3ff, #6a11cb);
    }
    
    .footer-inner {
      padding: 40px 0;
      text-align: center;
    }
    
    .footer-social {
      display: flex;
      gap: 18px;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .footer-social a {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: #fff;
      color: #111;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      text-decoration: none;
      transition: transform 0.3s;
    }
    
    .footer-social a:hover {
      transform: scale(1.1);
    }
    
    .footer-menu {
      display: flex;
      gap: 26px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }
    
    .footer-menu a {
      color: #eaeaea;
      text-decoration: none;
      transition: color 0.3s;
    }
    
    .footer-menu a:hover {
      color: #fff;
    }
    
    .footer-copy {
      font-size: 13px;
      color: #bdbdbd;
    }
    
    /* No JavaScript warning */
    .no-js-message {
      display: none;
      text-align: center;
      padding: 2rem;
      background: #f8d7da;
      color: #721c24;
      border-radius: 8px;
      margin: 2rem 0;
    }
    
    .no-js .no-js-message {
      display: block;
    }
    
    .no-js .player-shell,
    .no-js .player-cta,
    .no-js .cards {
      display: none;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }
      
      .hamburger {
        display: flex;
      }
      
      .header {
        padding: 10px 0;
      }
      
      .brand {
        font-size: 1.2rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      h3 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body class="no-js">
  <!-- No JavaScript warning -->
  <div class="no-js-message">
    <h2>JavaScript Required</h2>
    <p>This page requires JavaScript to function properly. Please enable JavaScript in your browser settings.</p>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="container nav">
      <a class="brand" href="index.html">
        <div class="logo-text">Obscura Vault</div>
      </a>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="index.html#about">About</a>
        <a href="lessons.html">Lessons</a>
        <a href="index.html#contact">Contact</a>
        <button class="icon-btn" data-open-search aria-label="Search">
          <i class='bx bx-search'></i>
        </button>
      </nav>
      <button class="icon-btn hamburger" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </header>

  <div class="container player-wrap">
    <div class="back-row">
      <button data-back onclick="history.back()">← Back</button>
    </div>

    <h2 id="playerTitle">Advanced Photography Techniques</h2>

    <!-- Custom Player -->
    <div class="player-shell" id="playerShell" aria-label="video player">
      <!-- Host for YouTube iframe -->
      <div class="yt-host" id="ytHost">
        <iframe id="ytPlayer" class="yt-iframe" src="https://www.youtube.com/embed/9i_UWs0tgJw?enablejsapi=1" title="YouTube player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>

      <!-- Transparent blocker over the iframe (prevents context menu & direct clicks) -->
      <div class="anti-iframe" id="antiIframe" oncontextmenu="return false;"></div>

      <!-- Watermark -->
      <div class="ov-watermark" aria-hidden="true"><span>Obscura Vault</span></div>
      <div class="ov-watermark1">
        <img src="https://via.placeholder.com/100?text=OV" alt="Watermark">
      </div>

      <!-- Custom Controls -->
      <div class="controls" id="controls">
        <div class="row">
          <button class="icon" id="playPause" aria-label="Play/Pause">
            <i class='bx bx-play' id="playIcon"></i>
            <span id="playLabel">Play</span>
          </button>

          <div class="seek">
            <span class="time" id="timeLeft">00:00</span>
            <input type="range" id="seekBar" min="0" max="1000" step="1" value="0" aria-label="Seek">
            <span class="time" id="timeRight">10:34</span>
          </div>

          <div class="right">
            <select class="speed" id="speed" aria-label="Playback speed">
              <option value="0.5">0.5×</option>
              <option value="0.75">0.75×</option>
              <option value="1" selected>1×</option>
              <option value="1.25">1.25×</option>
              <option value="1.5">1.5×</option>
              <option value="1.75">1.75×</option>
              <option value="2">2×</option>
            </select>

            <button class="icon" id="pipBtn" aria-label="Picture in Picture">
              <i class='bx bx-window'></i>
              <span>PiP</span>
            </button>

            <button class="icon" id="fsBtn" aria-label="Fullscreen">
              <i class='bx bx-fullscreen'></i>
              <span>Full</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="player-cta">
      <a class="btn1" id="telegramBtn" href="#" target="_blank">Terms and Conditions</a>
      <a class="btn1 secondary" id="resourceBtn" href="#" target="_blank">Access PDF</a>
    </div>

    <div class="bar"></div>
    <h3>Other parts in this lesson</h3>
    <div class="cards" id="relatedCards">
      <!-- Cards will be generated by JavaScript -->
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-top-art"></div>
    <div class="container">
      <div class="footer-inner">
        <div class="footer-social">
          <a href="https://t.me/ObscuraVaulfOfficial" target="_blank" aria-label="Telegram" title="Telegram">
            <i class='bx bxl-telegram'></i>
          </a>
          <a href="https://www.youtube.com/@ObscuraVault-Official" target="_blank" aria-label="YouTube" title="YouTube">
            <i class='bx bxl-youtube'></i>
          </a>
        </div>
        <nav class="footer-menu">
          <a href="index.html">Home</a>
          <a href="index.html#about">About</a>
          <a href="lessons.html">Lessons</a>
          <a href="index.html#contact">Contact</a>
        </nav>
        <div class="footer-copy">© 2025 Obscura Vault. All Rights Reserved</div>
      </div>
    </div>
  </footer>

  <script>
  // Remove no-js class if JavaScript is enabled
  document.body.classList.remove('no-js');
  
  // Sample data for demonstration
  const sampleData = {
    items: [
      {
        id: '1',
        subject: 'Photography',
        lesson: 'Advanced Techniques',
        partTitle: 'Part 1: Composition',
        youtube: 'https://www.youtube.com/watch?v=9i_UWs0tgJw',
        thumb: '',
        description: 'Learn the rules of composition and how to break them creatively.',
        telegram: '#',
        resource: '#'
      },
      {
        id: '2',
        subject: 'Photography',
        lesson: 'Advanced Techniques',
        partTitle: 'Part 2: Lighting',
        youtube: 'https://www.youtube.com/watch?v=abc123',
        thumb: '',
        description: 'Master natural and artificial lighting techniques for stunning photos.',
        telegram: '#',
        resource: '#'
      },
      {
        id: '3',
        subject: 'Photography',
        lesson: 'Advanced Techniques',
        partTitle: 'Part 3: Post-Processing',
        youtube: 'https://www.youtube.com/watch?v=def456',
        thumb: '',
        description: 'Enhance your images with professional editing techniques.',
        telegram: '#',
        resource: '#'
      },
      {
        id: '4',
        subject: 'Photography',
        lesson: 'Advanced Techniques',
        partTitle: 'Part 4: Special Effects',
        youtube: 'https://www.youtube.com/watch?v=ghi789',
        thumb: '',
        description: 'Create amazing visual effects both in-camera and in post.',
        telegram: '#',
        resource: '#'
      }
    ],
    current: {
      id: '1',
      subject: 'Photography',
      lesson: 'Advanced Techniques',
      partTitle: 'Part 1: Composition',
      youtube: 'https://www.youtube.com/watch?v=9i_UWs0tgJw',
      thumb: '',
      description: 'Learn the rules of composition and how to break them creatively.',
      telegram: '#',
      resource: '#'
    }
  };

  // Extract a YouTube videoId from common URL formats
  function extractYouTubeID(urlOrId) {
    if (!urlOrId) return null;
    // already an 11-char ID
    if (/^[a-zA-Z0-9_-]{11}$/.test(urlOrId)) return urlOrId;

    try {
      const u = new URL(urlOrId);
      if (u.hostname.includes('youtu.be')) return u.pathname.slice(1);
      if (u.searchParams.get('v')) return u.searchParams.get('v');
      // embed or short formats
      const m = u.pathname.match(/\/(embed|shorts|live)\/([a-zA-Z0-9_-]{11})/);
      if (m) return m[2];
    } catch {}
    // fallback: try to pull last 11 id-like chars
    const m2 = String(urlOrId).match(/([a-zA-Z0-9_-]{11})(?:[^a-zA-Z0-9_-]|$)/);
    return m2 ? m2[1] : null;
  }

  // Format time as mm:ss or hh:mm:ss
  function fmt(seconds) {
    seconds = Math.max(0, Math.floor(seconds || 0));
    const h = Math.floor(seconds / 3600);
    const m = Math.floor((seconds % 3600) / 60);
    const s = seconds % 60;
    if (h > 0) return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
    return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
  }

  // Render page
  function renderPlayer() {
    const t = document.getElementById('playerTitle');
    if (!sampleData.current) {
      t.textContent = 'Not found';
      return;
    }

    t.textContent = `${sampleData.current.lesson} — ${sampleData.current.partTitle}`;

    // Buttons
    const tg = document.getElementById('telegramBtn');
    const rs = document.getElementById('resourceBtn');
    tg.href = sampleData.current.telegram || '#';
    rs.href = sampleData.current.resource || '#';

    // Get current video thumbnail as fallback
    const currentVideoId = extractYouTubeID(sampleData.current.youtube);
    const fallbackThumb = currentVideoId ? `https://img.youtube.com/vi/${currentVideoId}/mqdefault.jpg` : '';

    // Related parts
    const rel = document.getElementById('relatedCards');
    rel.innerHTML = '';
    
    sampleData.items.forEach(p => {
      const card = document.createElement('div');
      card.className = 'card';
      
      // Use part thumbnail if available, otherwise use fallback
      const partVideoId = extractYouTubeID(p.youtube);
      const thumbSrc = p.thumb || (partVideoId ? `https://img.youtube.com/vi/${partVideoId}/mqdefault.jpg` : fallbackThumb);
      
      const img = document.createElement('img');
      img.src = thumbSrc;
      img.alt = p.partTitle || 'thumbnail';
      img.onerror = function() {
        // If thumbnail fails to load, use fallback
        if (thumbSrc !== fallbackThumb && fallbackThumb) {
          this.src = fallbackThumb;
        }
      };
      card.appendChild(img);
      
      const body = document.createElement('div');
      body.className = 'card-body';
      
      const tag = document.createElement('div');
      tag.className = 'tag-row';
      
      const dot = document.createElement('span');
      dot.className = 'dot';
      dot.style.setProperty('--subject-color', '#6a11cb');
      tag.appendChild(dot);
      tag.appendChild(document.createTextNode(`${p.subject}`));
      
      const h4 = document.createElement('h4');
      h4.textContent = p.partTitle || 'Part';
      
      const desc = document.createElement('p');
      desc.textContent = p.description || '';
      
      const actions = document.createElement('div');
      actions.className = 'card-actions';
      
      const open = document.createElement('button');
      open.className = 'btn1';
      open.textContent = (p.id === sampleData.current.id) ? 'Now Playing' : 'Play';
      open.disabled = (p.id === sampleData.current.id);
      open.addEventListener('click', () => {
        // In a real app, this would navigate to the selected video
        alert(`Would navigate to video: ${p.partTitle}`);
      });
      
      actions.appendChild(open);
      body.appendChild(tag);
      body.appendChild(h4);
      body.appendChild(desc);
      body.appendChild(actions);
      card.appendChild(body);
      rel.appendChild(card);
    });
  }

  // Initialize player controls
  function initPlayerControls() {
    const playBtn = document.getElementById('playPause');
    const playIcon = document.getElementById('playIcon');
    const playLabel = document.getElementById('playLabel');
    const seekBar = document.getElementById('seekBar');
    const timeLeft = document.getElementById('timeLeft');
    const timeRight = document.getElementById('timeRight');
    const speedSelect = document.getElementById('speed');
    const pipBtn = document.getElementById('pipBtn');
    const fsBtn = document.getElementById('fsBtn');
    const antiIframe = document.getElementById('antiIframe');
    
    let isPlaying = true;
    
    // Play/Pause button
    playBtn.addEventListener('click', () => {
      isPlaying = !isPlaying;
      if (isPlaying) {
        playIcon.className = 'bx bx-pause';
        playLabel.textContent = 'Pause';
      } else {
        playIcon.className = 'bx bx-play';
        playLabel.textContent = 'Play';
      }
    });
    
    // Mobile tap to play/pause
    antiIframe.addEventListener('click', () => {
      if (window.innerWidth <= 768) {
        isPlaying = !isPlaying;
        if (isPlaying) {
          playIcon.className = 'bx bx-pause';
          playLabel.textContent = 'Pause';
        } else {
          playIcon.className = 'bx bx-play';
          playLabel.textContent = 'Play';
        }
      }
    });
    
    // Seek bar
    seekBar.addEventListener('input', () => {
      const value = seekBar.value;
      timeLeft.textContent = fmt(value / 1000 * 650); // 650 is the mock video duration
    });
    
    // Speed selection
    speedSelect.addEventListener('change', () => {
      // In a real app, this would change playback rate
      console.log(`Playback speed changed to: ${speedSelect.value}`);
    });
    
    // Picture in Picture
    pipBtn.addEventListener('click', () => {
      alert('Picture-in-Picture mode would be activated here');
    });
    
    // Fullscreen
    fsBtn.addEventListener('click', () => {
      const shell = document.getElementById('playerShell');
      if (!document.fullscreenElement) {
        if (shell.requestFullscreen) shell.requestFullscreen();
        else if (shell.webkitRequestFullscreen) shell.webkitRequestFullscreen();
        else if (shell.msRequestFullscreen) shell.msRequestFullscreen();
      } else {
        if (document.exitFullscreen) document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        else if (document.msExitFullscreen) document.msExitFullscreen();
      }
    });
    
    // Show controls on mobile when tapping video
    antiIframe.addEventListener('touchstart', () => {
      if (window.innerWidth <= 768) {
        const controls = document.getElementById('controls');
        controls.style.opacity = '1';
        controls.style.pointerEvents = 'all';
        
        // Hide controls after 3 seconds
        clearTimeout(window.controlsTimeout);
        window.controlsTimeout = setTimeout(() => {
          controls.style.opacity = '0';
          controls.style.pointerEvents = 'none';
        }, 3000);
      }
    });
  }

  // Initialize the page
  function init() {
    renderPlayer();
    initPlayerControls();
    
    // Simulate YouTube API loading
    setTimeout(() => {
      // Simulate player ready event
      console.log('YouTube player is ready');
    }, 1000);
  }

  // Start initialization when page loads
  window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
