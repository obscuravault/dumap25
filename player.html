<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Obscura Vault - Courses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="selenix.css">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .player-shell {
      position: relative;
      width: 100%;
      max-width: 900px;
      background: #111;
      aspect-ratio: 16/9;
      display: flex;
      flex-direction: column;
    }
    #player {
      flex: 1;
    }
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0,0,0,0.6);
      padding: 6px;
      gap: 8px;
    }
    .controls button, .controls select {
      background: transparent;
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }
    .controls select {
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
      padding: 2px 4px;
    }
    .controls .icon {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    /* Volume slider styles */
    #volumeSlider {
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,.3);
      cursor: pointer;
      width: 80px;
    }
    #volumeSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 14px; height: 14px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(0,0,0,.2);
    }
    #volumeSlider::-moz-range-thumb {
      width: 14px; height: 14px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 0 0 3px rgba(0,0,0,.2);
    }
    @media (max-width: 768px) {
      #volumeSlider {
        width: 60px;
        height: 5px;
      }
      #volumeSlider::-webkit-slider-thumb {
        width: 12px;
        height: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="player-shell" id="playerShell">
    <div id="player"></div>
    <div class="controls">
      <div class="left">
        <button class="icon" id="playPauseBtn">
          <i class='bx bx-play'></i>
          <span>Play</span>
        </button>
      </div>
      <div class="right">
        <select class="speed" id="speed" aria-label="Playback speed">
          <option value="0.5">0.5×</option>
          <option value="0.75">0.75×</option>
          <option value="1" selected>1×</option>
          <option value="1.25">1.25×</option>
          <option value="1.5">1.5×</option>
          <option value="1.75">1.75×</option>
          <option value="2">2×</option>
        </select>
        <input type="range" id="volumeSlider" min="0" max="100" value="100" aria-label="Volume">
        <button class="icon" id="pipBtn">
          <i class='bx bx-window'></i>
          <span>PiP</span>
        </button>
        <button class="icon" id="fsBtn">
          <i class='bx bx-fullscreen'></i>
          <span>Full</span>
        </button>
      </div>
    </div>
  </div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    const state = { player: null, current: null };

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        videoId: 'dQw4w9WgXcQ', // default video
        playerVars: { controls: 0, modestbranding: 1 },
        events: { onReady: onPlayerReady }
      });
      state.player = player;
    }

    function onPlayerReady() {
      wireControls();
    }

    function $(sel){ return document.querySelector(sel); }

    function wireControls(){
      const playPauseBtn = $('#playPauseBtn');
      const speedSel = $('#speed');
      const fsBtn = $('#fsBtn');
      const pipBtn = $('#pipBtn');
      const volumeSlider = $('#volumeSlider');
      const shell = $('#playerShell');

      playPauseBtn.addEventListener('click', ()=>{
        if (player.getPlayerState() === YT.PlayerState.PLAYING) {
          player.pauseVideo();
          playPauseBtn.querySelector('i').className = 'bx bx-play';
        } else {
          player.playVideo();
          playPauseBtn.querySelector('i').className = 'bx bx-pause';
        }
      });

      speedSel.addEventListener('change', ()=>{
        player.setPlaybackRate(parseFloat(speedSel.value));
      });

      // Volume control
      volumeSlider.addEventListener('input', ()=>{
        player.setVolume(parseInt(volumeSlider.value));
      });

      // Picture-in-Picture
      pipBtn.addEventListener('click', async ()=>{
        const iframe = $('#player');
        if (iframe.requestPictureInPicture) {
          await iframe.requestPictureInPicture();
        }
      });

      // Fullscreen + landscape lock
      fsBtn.addEventListener('click', async ()=>{
        const el = shell;
        if (!document.fullscreenElement) {
          if (el.requestFullscreen) await el.requestFullscreen();
          else if (el.webkitRequestFullscreen) await el.webkitRequestFullscreen();
          else if (el.msRequestFullscreen) await el.msRequestFullscreen();

          if (screen.orientation && screen.orientation.lock) {
            try {
              await screen.orientation.lock('landscape');
            } catch(err) {
              console.warn('Orientation lock failed:', err);
            }
          }
        } else {
          if (document.exitFullscreen) await document.exitFullscreen();
          else if (document.webkitExitFullscreen) await document.webkitExitFullscreen();
          else if (document.msExitFullscreen) await document.msExitFullscreen();

          if (screen.orientation && screen.orientation.unlock) {
            screen.orientation.unlock();
          }
        }
      });
    }
  </script>
</body>
</html>
